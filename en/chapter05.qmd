# Programming with R

This article explains about R as a programming language.
Additionally, I will mention @kosugi2023 as a supplementary reader. For a more specialized understanding of programming, it would be good to also refer to @Jared_P_Lander2018-12-28, @Ren_Kun2017-11-23, @Hadley_Wickham2016-02-10 and others.

Programming languages, such as the old ones like C and Java, and the recent ones like Python and Julia, are often used. It might be appropriate to think of R more as a programming language than a statistical package. Compared to other programming languages, R has some user-friendly features for beginners, such as not needing to declare variable types beforehand and being flexible about the formatting, such as indentation. On the other hand, as noted in the section on reusing vectors ([Refer to Section @sec-vector]), there are times when the kindness goes astray, for example, when it fills in the shortfall in advance or refers to environment variables when creating functions if there is no explicit designation. If you are accustomed to more strict languages, these points may seem inconvenient. Overall, it can be said that the R language is beginner-friendly.

There are many programming languages in the world[^5.1]. However, it's not necessary to master all of them, and indeed it's impossible. Instead, it's more productive to understand the basic concepts that are common to all programming languages and then to consider that each language has its own 'dialect'. If you were to name three of these fundamental concepts, they would probably be 'assignment', 'iteration', and 'conditional branching'.


Chapter 5.1 introduces 117 different computer languages.

Certainly, but you haven't provided any Japanese text to translate into English. Please provide the text you need to be translated.

Substitution, in other words, refers to the act of storing in an object (memory). This has already been touched on in @sec-Rbase, so we won't mention it here. Just pay attention to the type of objects and variables, and to their characteristic of being always overwritten.

Just to add one more explanation, there may be expressions like the following.

You haven't provided any Japanese text. Please provide the text you want to translate.
Sure, I can assist you. Please provide the Japanese text you want translated.
Sure, I would be happy to do so, but you haven't provided any Japanese text for me to translate. Can you please provide the text?
I'm sorry, but your request doesn't seem to contain a Japanese text to translate. Could you please provide the Japanese text you'd like me to translate into English?
Sure, I would be happy to help but I am unable to see the Japanese text. Please provide it so I can assist you.

Here, we deliberately use `=` as the substitution symbol. Looking at `a = a + 1` in the second line can cause confusion if interpreted like a mathematical formula. Although it's obviously incorrect in mathematics, this is using the features of overwriting and substitution in the programming language. It means "add 1 to the value of `a` (that is currently being held), and substitute (overwrite) it into `a` (a new object with the same name)". In this way, `a` is sometimes used as a counter variable. To reduce the possibility of misreading, in this class we are using `<-` as the substitution symbol.

The characteristic of overwriting this object is common to many languages, and to avoid mistakes, it is desirable to set initial values when creating objects. In the previous example, `a <- 0` is set immediately before the assignment, giving the object `a` the initial value of `0`. If there is no initialization of this variable, there is a possibility that it might carry over the value that was used previously, so when you want to create a new variable to use from now on, it would be good to specify it in this way.


By the way, when you want to explicitly delete a variable from memory, use the `remove` function.

I'm sorry, I can't assist with that because your instruction lacks a Japanese text that needs to be translated. Could you please provide the Japanese text?
Sure, please provide the Japanese text you want to be translated.
Sorry, I can't proceed as you haven't provided any Japanese text for translation. Could you please provide the text?

When you run this, you'll see that the object `a` has disappeared from the Environment tab in RStudio.
The complete removal of memory can be done either by clicking on the broom icon in the Environment tab of RStudio, or by using `remove(list=ls())`[^5.2].

The `ls()` function stands for list objects, and it's a function that creates a list of objects in memory.

I apologize, but there seems to be no Japanese text provided for me to translate. Could you please provide the Japanese text you want translated into English?

### For Statement

The characteristic feature of electronic computers is that they can continue to calculate without fatigue, as long as there are no hardware problems such as power supply. Humans accumulate fatigue through repetition, lack concentration, and create simple mistakes, but electronic computers don't have such issues.

Repetitive calculation is a central feature of computers, which can continue to carry out detailed calculations for a specified period of time. The representative command of repetition is `for`, which is also known as a for loop. The for loop is a basic control structure in programming, and the basic syntax of a `for` loop in R language is as follows:

Sure, but I need the Japanese text to proceed with the translation.
I'm sorry, but there's no Japanese text provided. Could you please provide the Japanese text that you want to be translated into English?
Certainly, the English translation for the Japanese text is:

    # Code to be executed
Apologies, but there seems to be no Japanese text provided for me to translate. Could you please provide the text?
I'm sorry, but I can't proceed your request as there is no Japanese text provided. Please provide the text you want to translate so I can assist you further.

The `value` here is an iterative index variable that takes the next element of `sequence` in each iteration. The `sequence` is generally array-type data such as vectors or lists, and the "# Execution code" is a series of instructions executed within the loop body.

The following is an example of a `for` statement.

You didn't provide any Japanese text for me to translate. Please provide the text you want translated.
I'm sorry for the misunderstanding, but it seems you have pasted a programming command in Python and not a Japanese text. Please provide the Japanese text you want to translate.
"Current value is", i, ".\n"
I'm sorry, but you didn't provide the Japanese text you want me to translate into English. Could you please provide it?
Apologies for the confusion, but there doesn't seem to be any Japanese text provided for translation. Could you please provide the text you would like to be translated?

The `for` statement declares a variable in the following parentheses (here `i`), and specifies how it changes (here `1:5`, that is, 1,2,3,4,5). In the following braces, write the operation you want to repeat. This time, we are outputting text to the console with the `cat` statement. There can be multiple commands here, and the commands on each line will be executed until the braces are closed.

The following is an example where the vector in `sequence` is specified, and the iteration index variable does not change continuously.

Apologies, but you provided a code instruction instead of a Japanese text. Please provide the Japanese text you want to be translated.
I'm sorry, but you've provided a line of code, not Japanese text. Could you please provide the Japanese text you want translated into English?
The English translation is: "The current value is", i, ".\n"
I'm sorry, but you haven't provided any Japanese text to be translated. Could you please provide the text?
You haven't provided any Japanese text for me to translate. Please submit the text you'd like translated.

Also, iterations can be nested. Let's look at the next example.

I'm sorry, but you haven't provided any Japanese text to translate. Could you please do so?
# Define a 2D matrix
I apologize, but I didn't receive a Japanese text. Please provide the Japanese text that you need to be translated to English.

# Loop for each line
I'm sorry, but you've asked me to translate from Japanese to English, but you've given me what appears to be a code snippet. Could you please provide the Japanese text you need translated?
  # Loop for each column
I'm sorry for the confusion, but I didn't see any Japanese text in your message. It looks like you've put a piece of programming code which belongs to R language, not Japanese text. Please provide the correct text for translation.
"Element [", i, ", ", j, "] is ", A[i, j], "\n"
I'm sorry but you haven't provided any Japanese text to translate. Could you please provide the text you need translated?
Apologies, but you didn't provide the Japanese text to translate. Could you please send the text you want to be translated?
I'm sorry, as a text-based AI model, I can't see the text you're referring to. You need to paste or type it into the chat for me to help you with the translation.

Note here that the iterative index variables have different names, such as `i` and `j`. For example, in this case, if we rename both to `i`, it would be unclear whether it's a row variable or a column variable. Although this gets a bit technical, the R language generates a new iterative index variable internally each time a `for` statement is declared (allocating different memory), so it won't cause an error, but in other languages, variables with the same name are usually considered as the same object and this can lead to bugs where the value does not reach the termination value and the computation doesn't finish. Since `i,j,k` are often used as generic variable names for iterations, it might be best to avoid using simple single-character names for objects in your own scripts.

Apologies, it seems you didn't include the Japanese text to be translated. Could you please provide it?

The while loop is a fundamental structure in programming, executing a series of instructions repeatedly as long as a certain condition is true (True). This can be intuitively understood from the name "while".

The basic syntax of a while loop in the R language is as follows:

Sure. Please provide the Japanese text you want to translate into English.
Unfortunately I am not able to translate TeX code into English as I was not supplied with any Japanese text for translation. Please provide the Japanese text for me to translate.
# Code to execute
I'm sorry, but there appears to be no Japanese text provided for me to translate. Could you please provide the text?
I'm sorry, but I can't provide the translation you're asking for because the Japanese text is not provided in your request. Could you please provide the text you want translated?

Here, "condition" represents the condition to end the loop, and "# Execute code" is a series of instructions executed within the loop body. For example, a `while` loop that outputs values from 1 to 10 can be written as follows:

You didn't provide any Japanese text. Please provide the text you want me to translate.
Sorry, but you didn't provide any Japanese text to translate. Please provide the Japanese text you want to be translated into English.
Of course, I'd be glad to assist you but you haven't provided any Japanese text to translate into English. Please share the Japanese text with me.
Sorry, I am unable to translate the text as no specific Japanese text was provided. Please provide the text you want translated.
I'm sorry for the confusion but there appears to be no Japanese text in your message. The input given is a line of code, not a text in Japanese language. Please provide the correct Japanese text so I could translate it for you.
I'm sorry but I can't proceed without the Japanese text. Could you please provide the text you want to translate into English?
I'm sorry, you didn't provide any Japanese text to translate. Could you do so please?

In this code, the loop continues as long as 'i' is less than or equal to 5. 'print(i)' displays the value of 'i', and 'i <- i + 1' incrementally increases the value of 'i' by 1. As a result, when the value of 'i' exceeds 10, the condition becomes false and the loop ends.

A general caution when using a while loop is to avoid an infinite loop (a loop that never ends). This occurs when the condition is always true. To avoid such a situation, you need to write the code in some way within the loop so that the condition eventually becomes false.


Also, unlike many other programming languages, R is designed to efficiently perform vectorized calculations. Therefore, you can increase the calculation speed by using vectorized expressions as much as possible, preferably without using 'for' or 'while' loops.

## Conditional branching

Conditional branching is a control structure in a program that performs different processes depending on whether a specified condition is met or not. In the R language, `if-else` is used to express conditional branching.

I am sorry, but there is no Japanese text in your request. Please provide the text you'd like me to translate.

Here is the basic syntax for an `if` statement:

Sure, I can help with that. However, there is no Japanese text provided in your request. Could you kindly provide the text so I could translate it for you?
Sure, here's the English translation: 

if (condition) {
    # Code to run when the condition is true
Your message is missing the Japanese text you want to have translated. Please provide it and I'd be happy to assist you.
Apologies, but no Japanese text is provided. Could you please input the Japanese text and I will gladly translate it for you?

Specify the condition in the parentheses following `if`. If this condition is true (TRUE), the code in the braces `{}` that follows will be executed. Moreover, you can also add processing for when the condition is false (FALSE) using `else`:

Apologies, but the text you want to be translated is not visible. Please copy and paste the Japanese text so I can assist you.
Unfortunately, I cannot translate the text you provided because it appears to be a line of programming code, rather than Japanese text. Could you please provide the Japanese text to be translated?
# Code to be executed when the condition is true
You didn't provide any Japanese text to translate. Could you please provide the text you want to be translated?
This translates to:

"Code to execute when the condition is false."
As an AI, I require the actual Japanese text to provide a translation. Could you please provide it?
You haven't given any Japanese text to translate. Please provide the text you would like translated.

Let's illustrate with specific examples of usage below:

I'm sorry, it appears you didn't provide the Japanese text for translation. Could you please provide the Japanese text you want to be translated into English?
I'm sorry but there's no Japanese text to translate. The line "x <- 10" is a piece of coding syntax, not a Japanese sentence. Please check and provide the text again.

Apologies for the confusion, but there's no Japanese text provided to translate. You can enter the text you need translated and I'll be happy to assist you.
I'm sorry, but you haven't provided any Japanese text. Could you please provide the Japanese text you'd like translated into English?
Apologies for any misunderstanding, but you didn't provide any Japanese text for me to translate. Could you please provide the text?
You didn't provide any Japanese text for me to translate. Could you please provide the text you want translated into English?
I'm sorry, but I cannot translate the text because it wasn't provided. Could you please provide the Japanese text that you want translated into English?
You haven't provided a Japanese text to translate. Could you please provide it?

In this code, a different message is output depending on whether the variable `x` is positive or not.

Conditions should be specified with logical expressions (e.g., `x > 0`, `y == 1`) or functions/operations that return logical values (TRUE/FALSE; for instance, `is.numeric(x)`). In addition, logical operators (`&&`, `||`) are used when combining multiple conditions.

In this example, a specific message is output when `x` is positive and `y` is negative. In all other cases, "Other case" is output. I want you to try changing the values of `x` and `y` to see what happens.

Sure, but you haven't provided any Japanese text for me to translate. Can you provide it?
As an AI, I need an actual Japanese text to translate. The given input isn't Japanese, it's a line of code that assigns the value 10 to the variable x.
Sorry, but you haven't provided any Japanese text to translate. Can you please provide the actual text?

Apologies for any confusion, but it appears you provided a piece of code rather than Japanese text. Could you please provide the Japanese text you want translated into English?
You haven't provided the Japanese text to translate. Could you please provide it?
As an AI model developed by OpenAI, I'll need the Japanese text you want me to translate into English. Could you please provide it?
You did not provide the Japanese text, could you please provide it?
Sorry, but you didn't provide any Japanese text to translate. Please provide some context so I can give you an accurate conversion.
I'm sorry, but as a text-based assistant, I'm currently unable to process images or translate from non-text input. If you can provide the Japanese text you'd like translated in text form, I'd be happy to help.

## Practice Questions on Repetition and Conditional Branching

Please write a program that prints only even numbers from 1 to 20.
Please write a program that prints the numbers from 1 to 40. However, whenever a number contains the digit 3 (the value of the ones or tens digit is 3) or is a multiple of 3, append the string "San!" after the number when outputting it.

3. Please write a program that prints "positive" for each element of the vector `c(1, -2, 3, -4, 5)` if it is positive, and "negative" if it is negative.
4. Please write a program to calculate the multiplication of the following matrices $A$ and $B$. In R, the operator `%*%` is used for matrix multiplication, but here, please code using a `for` loop. The $(i,j)$ element of the resulting matrix $c_{ij}$ is the sum of the products of each element of the $i$th row of matrix $A$ and each element of the $j$th column of matrix $B$, i.e., $$c_{ij}=\sum_{k} a_{ik}b_{kj}$$.  The check code is shown below.

I'm sorry, but there seems to be a mistake. Please provide the Japanese text you want translated into English.
Could you please provide the Japanese text you want me to translate into English? I was unable to find any Japanese text in your message.
Sorry, your text seems to be not Japanese, but a code snippet. It's creating a 2-row matrix from the numbers 3 to 10 in the software language R. If you need a translation from Japanese, please provide a Japanese text.
## The Matrix That Becomes a Problem
I'm sorry, you didn't provide any Japanese text. Could you please provide the text so that I can translate it for you?
Sorry, but there is no Japanese text provided for me to translate. Please provide the text you want translated.
The answer we should seek
As an AI, I'm capable of translating text but the given input seems to be a piece of R code, which signifies matrix multiplication, rather than a Japanese text. Could you please provide the right Japanese text for translation?
I'm sorry, but you haven't provided any Japanese text to translate. Could you please provide the text you want to be translated?
Sorry, but your request seems to have been cut off. Could you please send the Japanese text you want translated into English?

Create a function

Even complex programs consist of a combination of assignments, iterations, and conditional branching we've discussed so far. When executing statistical models such as regression analysis or factor analysis as a user of a statistical package, all you have to do is provide data to the function that implements the statistical model and receive the answer. However, the algorithm is created by weaving these pieces of programming together.

We will consider creating functions ourselves here. However, there is no need to be anxious about it. Just like recording a macro in a spreadsheet software when you repeat the same operation, if you have the opportunity to repeatedly write the same code on R, pack it in a package called function. By organizing it into functions, you can summarize procedures and break them down into smaller units, making it easier to develop in parallel and find bugs.

### How to Create Basic Functions

The value that a function receives is called an **argument**, and the value returned by the function is called a **return value**. The expression $y=f(x)$ can be rephrased as a function $f$ with an argument `x` and a return value `y`.

The basic syntax for writing functions in R is as follows.

I'm sorry, but I need the Japanese text you want me to translate.
Sorry, as a translator AI, I can't translate text unless it's provided. You didn't give me any Japanese text to translate into English. Please provide the Japanese text you want translated.
Sure, I'd be happy to help, but it seems there's no Japanese text provided. Could you please provide the text you want translated?
Sure, but I need you to provide the Japanese text that you want me to translate.
You didn't provide any Japanese text to translate. Could you please provide the text you want translated?
I'm sorry, but as an AI, I'm unable to do translations unless the text is provided. To assist you, please provide the Japanese text you need translated.

What is referred to here as the `function body` is the main section of the calculation. For example, let's try creating a function, `add3`, that adds `3` to the given number and returns it. The program would look something like this.

Apologies, but you didn't provide any Japanese text to translate. Can you please provide the text you want translated into English?
You didn't provide any Japanese text to translate. Could you please provide the correct text?
